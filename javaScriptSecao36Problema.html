<!DOCTYPE html><!-- doctype informa ao agente de usuário a versão html que deve ser renderizada -->
<html lang="pt-br">

<head>
	<title>Javascript(Seção 36): Estilização e saltos(prob.)</title>
	<meta charset="utf-8">
	<meta name="author" content="Guilherme Francisco">
	<meta name="description" content="Estrutra base HTML">
	<meta name="keywords" content=" Estrutura, Base ,Html">
</head>
<style>
	.nav{
		width: 160px;
		position: fixed;
	}
	.content{
		margin-left: 165px;
	}
	.nav ul{
		margin: 0;
		padding: 0;
		list-style: none;
	}
	.nav li{
		background-color: #ddd;
	}
	.nav li + li{
		margin-top: 2px;
	}
	.nav a{
		display: block;
		padding: 10px;
	}
	.nav a.actived{
		background: orange;
	}
</style>
<body>
	<nav class="nav">
		<ul>
			<li><a href="#s1">Link 1</a></li>
			<li><a href="#s2">Link 2</a></li>
			<li><a href="#s3">Link 3</a></li>
		</ul>	
	</nav>
	<main class="content">
		<h1>Javascript completo</h1>

		<h2 id="s1">seção 1</h2>

		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<h2 id="s2">seção 2</h2>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p><p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<h2 id="s3">seção 3</h2>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
		<p>Só um parágrafo aleatório, em que sua existência basea-se em preencher espaços afim de iludir o leitor, para que ache que tem algum conteudo, onde apenas só funciona como spam.</p>
	</main>
	<script>
		(function(){

			window.addEventListener("scroll",destacaMenu);

			var $menu = document.querySelector(".nav");
			var $links = $menu.querySelectorAll("li a");

			function destacaMenu(){
				var positions = [];
				for(var i = 0; i < $links.length; i++){ // iterando o array positions para informar a posiçao top de cada secao
					positions[i] = pegaYPosicaoScroll($links[i]);
				}
				console.log(positions);

				var linkAtual = pegaUltimoLinkVisivel(positions);
				
				var linkActived = $menu.querySelector(".actived");
				if(linkActived){
					linkActived.classList.remove("actived"); // tira os activeds das secoes passadas
				}
				linkAtual.classList.add("actived"); // adiciona o actived na seçao atual
			}
			function pegaYPosicaoScroll(link){
				var alvo = document.querySelector(link.getAttribute("href")); // setando como alvo todos os atributos href das li's
				var positionYViewport = alvo.getBoundingClientRect().top; // pegando do DOMRect a posiçao top de cada alvo

				return positionYViewport; // retornando a posicao top
			}
			function pegaUltimoLinkVisivel(positions){
				var qtd = positions.length;
				while(qtd){
					qtd --;
					if (positions[qtd]<innerHeight/2) {
						return $links[qtd];
					}
				}
				return $links[0];
			}
		})();
	</script>
</body>

</html>